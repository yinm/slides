<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"><meta name="theme-color" content="#3498db"><meta name="viewport" content="width=device-width,initial-scale=1"><title>20191106-learning-webpack-with-plguins</title><meta property="og:title" content="20191106-learning-webpack-with-plguins"><meta property="og:type" content="article"><meta property="og:url" content="https://yinm.github.io/slides/20191106-learning-webpack-with-plguins"><meta property="og:image" content="https://avatars.githubusercontent.com/yinm?s=200&v=4"><meta property="og:site_name" content="yinm's slides"><link href="vendor.6.3e4eaf34c3f2e403d3f9.css" rel="stylesheet"><link href="main.3.305f27d42da27696cfc7.css" rel="stylesheet"></head><body><div id="root"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="btn-sidebar" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg><article id="webslides"><section class="aligncenter title"><h1>Pluginで理解するwebpack</h1><br><p>@ 2019.11.06 <a href="https://ginzajs.connpass.com/event/150708/">Ginza.js#6 - connpass</a></p></section><section class="aligncenter"><h1>About me</h1></section><section class="aligncenter fullscreen"><div class="card-50"><figure><img src="9a57f767cfb679fabff747682cf186c1.webp"></figure><div class="flex-content"><h1>Yusuke Iinuma</h1><p>(@yinm)</p><br><ul class="profile-list"><li><strong>A Web Frontend Engineer</strong></li><li>Working at <strong>GMO Pepabo, Inc.</strong></li><li>A staff of <strong>Vue.js Japan User Group</strong></li></ul><div class="sns-list"><a href="https://github.com/yinm" target="_blank"><i class="fab fa-github"></i></a><a href="https://twitter.com/_yinm_" target="_blank"><i class="fab fa-twitter"></i></a><a href="https://yinm.info/" target="_blank"><i class="fas fa-home"></i></a></div></div></div></section><section class="aligncenter"><h2>おしながき</h2></section><section class="aligncenter agenda"><ul><li>発表のゴール</li><li>webpackのプラグインとは</li><li>まとめ</li></ul></section><section class="aligncenter agenda"><ul><li><strong>発表のゴール</strong></li><li>webpackのプラグインとは</li><li>まとめ</li></ul></section><section class="aligncenter"><h2>webpackの処理を理解したい人が</h2><h2>webpackのプラグインシステムを理解できるようになる</h2></section><section class="aligncenter"><h1>話すこと</h1><br><br><br><ul><li>webpackのプラグインとは</li><li>Tapableについて<ul><li>説明用のコードはこちら: <a href="https://github.com/yinm/study-webpack-plugins">yinm/study-webpack-plugins</a></li></ul></li></ul></section><section class="aligncenter"><h1>話さないこと</h1><br><br><br><ul><li>既存の便利プラグインの紹介</li></ul></section><section class="aligncenter agenda"><ul><li>発表のゴール</li><li><strong>webpackのプラグインとは</strong></li><li>まとめ</li></ul></section><section class="aligncenter"><blockquote><p>Plugins are the backbone of webpack. webpack itself is built on the same plugin system that you use in your webpack configuration!</p><cite><a href="https://webpack.js.org/concepts/plugins/" target="_blank">Plugins | webpack</a></cite></blockquote><ul><li>webpack.config.jsで設定するプラグインと同じプラグインシステムで、<br>webpack本体もできている</li></ul><br><br><br><h3>➡️ プラグインシステムを理解することが、webpack本体の理解につながる！</h3></section><section class="aligncenter"><h1>プラグインのインターフェース(2種類)</h1></section><section class="aligncenter"><ul><li><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>apply()</code></a>メソッドを持つオブジェクト</li><li>引数にcompilerを取る関数<ul><li><a href="https://github.com/webpack/webpack/releases/tag/v4.27.0">v4.27.0+から可能</a></li></ul></li></ul></section><section class="aligncenter"><h3><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>apply()</code></a>メソッドを持つオブジェクトの場合</h3><img src="7316ac82cf2210411965e7917a921360.webp"></section><section class="aligncenter"><h3>引数にcompilerを取る関数の場合</h3><img src="c4377e3dd1ad5befff5c370739af3363.webp"></section><section class="aligncenter"><h3>webpack.config.jsでの設定</h3><img src="1e282136f3580b53235a81cbc30eb502.webp"></section><section class="aligncenter"><h1>プラグインの処理</h1></section><section class="aligncenter"><ul><li>webpackで定義されたevent hooks発生時に実行したい処理を実装する<ul><li>event hooksは、<a href="https://webpack.js.org/api/compiler-hooks/">Compiler Hooks | webpack</a>などに書かれている</li></ul></li><li>event hooksの実装に使われているコアライブラリとして、<a href="https://github.com/webpack/tapable">webpack/tapable</a>がある</li></ul></section><section class="aligncenter"><h2>簡単な実装でTapableを確認する</h2></section><section class="aligncenter"><h3>event hooksを定義する</h3><img src="e3b80f317b584a7c64cba8a79e20677a.webp"></section><section class="aligncenter"><h3>処理の中で、定義したevent hooksを呼び出す</h3><img src="f701fc6b5bb1fa2dd772be09ef5ae754.webp"></section><section class="aligncenter"><h3>Hookされたタイミングで実行したい処理を実装する</h3><h3>(webpackのプラグインで実装するのはこの部分)</h3><img src="11a8cac491133b6dc9c09cc9467ca20a.webp"></section><section class="aligncenter"><h2>webpack本体で、Tapableを使っていることを確認する</h2><p>(画像のコードは、<a href="https://github.com/webpack/webpack/blob/3518ad590f353d53011bdeb466130783821a168f/lib/Compiler.js">スライド作成時点の<code>webpack/lib/Compiler.js</code></a>からキャプチャ)</p></section><section class="aligncenter"><h3>event hooksを定義する</h3><img src="25f81cf3bcabc1d5cc92407173550e43.webp"></section><section class="aligncenter"><h3>処理の中で、定義したevent hooksを呼び出す</h3><img src="af6d5aca167984cb3d5a00027131477e.webp"></section><section class="aligncenter"><h3>webpack本体で、Tapableを使っている箇所</h3><br><br><ul><li>Compiler</li><li>Compilation</li><li>Resolver</li><li>Module Factories</li><li>Parser</li><li>Template</li></ul><br><br><br><p>ref: <a href="https://www.youtube.com/watch?v=4tQiJaFzuJ8">Everything is a plugin! Mastering webpack from the inside out - Sean Larkin - YouTube</a></p></section><section class="aligncenter"><h3>プラグインでHookできる大体の場所がわかったので、</h3><h3>詳細を追っていけばwebpackの処理を理解できるようになりそう</h3><h3>(自分もまだ全然追えてないですが...！)</h3></section><section class="aligncenter agenda"><ul><li>発表のゴール</li><li>webpackのプラグインとは</li><li><strong>まとめ</strong></li></ul></section><section class="aligncenter"><ul><li>webpackのプラグインシステムは、webpack本体でも使用されている</li><li>webpackのプラグインは、以下のどちらかのインターフェースを持っている<ul><li><code>apply()</code>メソッドを持つオブジェクト</li><li>compilerを引数に取る関数</li></ul></li><li>webpackのevent hooksの実装には、Tapableが使われている</li></ul></section></article></div><script type="text/javascript" src="runtime.da0b04b79f4f25181c17.bundle.js"></script><script type="text/javascript" src="vendor.6.3e4eaf34c3f2e403d3f9.bundle.js"></script><script type="text/javascript" src="main.3.305f27d42da27696cfc7.bundle.js"></script></body></html>