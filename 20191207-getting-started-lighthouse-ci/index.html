<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-type" content="text/html; charset=utf-8"><meta name="theme-color" content="#3498db"><meta name="viewport" content="width=device-width,initial-scale=1"><title>20191207-getting-started-lighthouse-ci</title><meta property="og:title" content="20191207-getting-started-lighthouse-ci"><meta property="og:type" content="article"><meta property="og:url" content="https://yinm.github.io/slides/20191207-getting-started-lighthouse-ci"><meta property="og:image" content="https://avatars.githubusercontent.com/yinm?s=200&v=4"><meta property="og:site_name" content="yinm's slides"><link href="vendor.6.1ee3ad1ae469ac8c59d2.css" rel="stylesheet"><link href="main.3.7b2fd065f9be3cad03b6.css" rel="stylesheet"></head><body><div id="root"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" class="btn-sidebar" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg><article id="webslides"><section class="aligncenter title"><h1>Lighthouse CI入門</h1><br><p>@ 2019.12.07 <a href="https://wajs.connpass.com/event/151413/">【We Are JavaScripters! 3周年記念】 WeJS Festival ! - connpass</a></p></section><section class="aligncenter"><h1>About me</h1></section><section class="aligncenter fullscreen"><div class="card-50"><figure><img src="9a57f767cfb679fabff747682cf186c1.webp"></figure><div class="flex-content"><h1>Yusuke Iinuma</h1><p>(@yinm)</p><br><ul class="profile-list"><li><strong>A Web Frontend Engineer</strong></li><li>Working at <strong>GMO Pepabo, Inc.</strong></li><li>A staff of <strong>Vue.js Japan User Group</strong></li></ul><div class="sns-list"><a href="https://github.com/yinm" target="_blank"><i class="fab fa-github"></i></a><a href="https://twitter.com/_yinm_" target="_blank"><i class="fab fa-twitter"></i></a><a href="https://yinm.info/" target="_blank"><i class="fas fa-home"></i></a></div></div></div></section><section class="aligncenter"><h2>おしながき</h2></section><section class="aligncenter agenda"><ul><li>発表のゴール</li><li>Lighthouse CIとは</li><li>Lighthouse CIの主要なコマンド</li><li>まとめ</li></ul></section><section class="aligncenter agenda"><ul><li><strong>発表のゴール</strong></li><li>Lighthouse CIとは</li><li>Lighthouse CIの主要なコマンド</li><li>まとめ</li></ul></section><section class="aligncenter"><h2>Lighthouse CIを使ったことがない人が</h2><h2>主要な機能を理解できるようになる</h2></section><section class="aligncenter"><h1>話すこと</h1><br><br><br><ul><li><a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/cli.md">CLI</a>の主要なコマンドの使い方を、簡単な例を交えて紹介</li><li>実装例は、<a href="https://github.com/yinm/study-lighthouse-ci">yinm/study-lighthouse-ci</a></li></ul></section><section class="aligncenter"><h1>話さないこと</h1><br><br><br><ul><li>Lighthouse CI Server</li><li>Lighthouseのスコア改善に繋がること</li></ul></section><section class="aligncenter agenda"><ul><li>発表のゴール</li><li><strong>Lighthouse CIとは</strong></li><li>Lighthouse CIの主要なコマンド</li><li>まとめ</li></ul></section><section class="aligncenter"><ul><li><a href="https://github.com/GoogleChrome/lighthouse">Lighthouse</a>をCIで使いやすいように、assertionなどの機能を使えるようにしたもの</li><li>Lighthouse CIを導入するには、いくつか要件がある<ul><li>e.g. 静的サイトか、production環境に近いアセットを配信できるサーバーを立ち上げるコマンドを用意する必要がある</li><li>詳細: <a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/getting-started.md#prerequisites">lighthouse-ci/getting-started.md</a></li></ul></li></ul></section><section class="aligncenter"><h3>Lighthouse CIの全体像 (発表内で出てくる部分のみ)</h3><br><br><br><img src="80eff8463a9db5d996ce60cd35cd82f7.webp"></section><section class="aligncenter agenda"><ul><li>発表のゴール</li><li>Lighthouse CIとは</li><li><strong>Lighthouse CIの主要なコマンド</strong></li><li>まとめ</li></ul></section><section class="aligncenter"><h1>Collect</h1><br><br><br><ul><li>Lighthouseを複数回実行して、結果を<code>.lighthouseci/</code>ディレクトリに保存する</li><li>詳細: <a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/cli.md#collect">lighthouse-ci/cli.md at master · GoogleChrome/lighthouse-ci</a></li></ul></section><section class="aligncenter"><h3>以下の画像の部分を実装した例: <a href="https://github.com/yinm/study-lighthouse-ci/pull/1">Install and Collect</a></h3><br><br><br><img src="d6dc2e654b5c8b09f890908d5dcb0bd5.webp"></section><section class="aligncenter"><h1>Upload</h1><br><br><br><ul><li><code>.lighthouseci/</code>ディレクトリを任意の場所に保存する</li><li><a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/getting-started.md#github-status-checks">GitHub status checkに、Lighthouseの実行結果を表示</a>することもできる</li><li>詳細: <a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/cli.md#upload">lighthouse-ci/cli.md at master · GoogleChrome/lighthouse-ci</a></li></ul></section><section class="aligncenter"><h3>以下の画像の部分を実装した例: <a href="https://github.com/yinm/study-lighthouse-ci/pull/2">CI and Upload</a></h3><br><br><br><img src="1c54a0850a4556dfd2ef1b3b440f4abc.webp"></section><section class="aligncenter"><h1>Assert</h1><br><br><br><ul><li><code>.lighthouseci/</code>が、意図した結果になっているかを検証する</li><li>検証内容は、ESLintのルールのように設定できる<ul><li>presetもある (e.g. <a href="https://github.com/GoogleChrome/lighthouse-ci/blob/17fc5a1405200672bc756af0712c54ca3858dc07/packages/utils/src/presets/recommended.js">lighthouse:recommended</a>)</li></ul></li><li>詳細:<ul><li><a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/assertions.md">lighthouse-ci/assertions.md at master · GoogleChrome/lighthouse-ci</a></li><li><a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/cli.md#assert">lighthouse-ci/cli.md at master · GoogleChrome/lighthouse-ci</a></li></ul></li></ul></section><section class="aligncenter"><h3>以下の画像の部分を実装した例: <a href="https://github.com/yinm/study-lighthouse-ci/pull/3">Assert</a></h3><br><br><br><img src="da5de6a0a7d0ec1424a78ab855e87b91.webp"></section><section class="aligncenter"><h2>ここから先は、Lighthouse CIを楽に使えるようにする機能</h2></section><section class="aligncenter"><h1>configuration</h1><br><br><br><ul><li>オプションとして渡していたものを、設定ファイルに移すことで編集しやすくなる</li><li><code>.lighthouserc.yml</code>など特定の名前にすると、自動的に読み込んでくれる</li><li><a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/cli.md#healthcheck">設定ファイルがvalidかをチェックするコマンド</a>もある</li><li>詳細: <a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/configuration.md">lighthouse-ci/configuration.md at master · GoogleChrome/lighthouse-ci</a></li><li>実装例: <a href="https://github.com/yinm/study-lighthouse-ci/pull/4">Configuration</a></li></ul></section><section class="aligncenter"><h1>autorun</h1><br><br><br><ul><li>Collect, Assert, Uploadをいい感じのデフォルト設定で実行してくれるコマンド</li><li>詳細: <a href="https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/cli.md#autorun">lighthouse-ci/cli.md at master · GoogleChrome/lighthouse-ci</a></li><li>実装例: <a href="https://github.com/yinm/study-lighthouse-ci/pull/5">Autorun</a></li></ul></section><section class="aligncenter agenda"><ul><li>発表のゴール</li><li>Lighthouse CIとは</li><li>Lighthouse CIの主要なコマンド</li><li><strong>まとめ</strong></li></ul></section><section class="aligncenter"><ul><li>Lighthouse CIは、LighthouseをCI実行しやすいようにしたもの</li><li>主要なコマンドに以下がある<ul><li>Collect</li><li>Assert</li><li>Upload</li></ul></li></ul></section></article></div><script type="text/javascript" src="runtime.04da232a83c0c928ffff.bundle.js"></script><script type="text/javascript" src="vendor.6.1ee3ad1ae469ac8c59d2.bundle.js"></script><script type="text/javascript" src="main.3.7b2fd065f9be3cad03b6.bundle.js"></script></body></html>